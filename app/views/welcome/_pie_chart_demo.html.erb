<div class = "pie-chart-demo demo container">
  <div class = "demo-ind">
    <div class = "demo-toggle start"></div>
    <div class = "demo-message">Pie Chart</div>
  </div>
  <div class = "chart"></div>
</div>
<script>
  (function(){
    var id = "pie-chart";

    var chartContainer = d3.select('.'+id+'-demo .chart');

    var chart = d2b.CHARTS.pieChart().select('.'+id+'-demo .chart');

    var currentSlide = 0;

    var interval;

    function resize(){
      var width = chartContainer.node().getBoundingClientRect().width;
      chart
        .width(width)
        .height(500)
        .animationDuration(500);
    }

    $('.'+id+'-demo .demo-toggle').click(function(){
      var button = $(this);

      if(button.hasClass("start")) interval = setInterval(switchSlides, 2000);
      else clearInterval(interval);

      button.toggleClass("start");
      button.toggleClass("stop");
    });

    $(window).on('resize.'+id+'-demo', function(){
      resize();
      chart.animationDuration(0).update().animationDuration(500)
    });
    resize();

    function rand(){
      return Math.round(Math.random() * 100);
    }

    function switchSlides(){

      var data = {
        data:{
          values:[
            {label: "A", value: rand()},
            {label: "B", value: rand()},
            {label: "C", value: rand()},
            {label: "D", value: rand()},
            {label: "E", value: rand()},
            {label: "F", value: rand()},
            {label: "G", value: rand()},
            {label: "H", value: rand()}
          ]
        }
      };
      chart
        .donutRatio(Math.random() * 0.8)
        .data(data)
        .controls({hideLegend:{enabled:true}})
        .update();
    }

    switchSlides();

  })();
</script>
